<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="utf-8"/>
<head th:replace="fragments/head :: head"></head>
  <body>
  <div th:replace="fragments/header :: header">
  </div>
  <div th:replace="fragments/search :: search">
  </div>
  <div class="container">

      <form th:action="@{/announcement/save}" th:object="${announcement}" method="post">

          <table class="m-auto">
              <tr>
                  <td class="text-right" colspan="3">
                      <a class="btn btn-primary" th:href="@{/announcement/list}" th:text="#{cancel}"></a>
                      <button class="btn btn-primary" th:text="#{save}" type="submit"/>
                  </td>
              </tr>
              <tr>
                  <td colspan="3">
                      Kategoria pojazdu
                      <select id="vehicleType"
                              onchange="loadManufacturer(this.value, 'option'); loadVehicleSubtypes(this.value, 'option');"
                              th:field="*{vehicleType}">
                          <option
                                  th:each="vehicleTypeElement : ${T(com.app.enums.VehicleType).values()}"
                                  th:selected="*{vehicleType}" th:text="${vehicleTypeElement.label}"
                                  th:value="${vehicleTypeElement}">
                          </option>
                      </select>
                      <span class="validationError" th:each="error: ${#fields.errors('vehicleType')}"
                            th:text="${error}">
								</span>
                      <input th:field="*{id}" type="hidden"/>
                      <input th:field="*{user}" type="hidden"/>
                  </td>
              </tr>
              <tr>
                  <td>
                      <label for="manufacturer">Marka pojazdu</label><br/>
                      <select id="manufacturer"
                              onchange="loadVehicleModel(this.value,$('#vehicleType').val(), 'option');" required
                              th:field="*{manufacturerId}">
                          <option
                                  th:each="manufacturers: ${manufacturerList}"
                                  th:selected="*{manufacturerId}" th:text="${manufacturers.name}"
                                  th:value="${manufacturers.id}">
                          </option>
                      </select>
                      <span class="validationError" th:each="error: ${#fields.errors('manufacturerId')}"
                            th:text="${error}"></span>
                  </td>
                  <td>
                      <label for="vehicleModel">Model pojazdu</label><br/>
                      <select id="vehicleModel" required th:field="*{vehicleModel}">
                          <option
                                  th:each="vehicleModels: ${vehicleModelList}"
                                  th:selected="*{vehicleModel}" th:text="${vehicleModels.name}"
                                  th:value="${vehicleModels.id}">
                          </option>
                      </select>
                  </td>
              </tr>
              <tr>
                  <td>
                      <label for="productionYear">Rok produkcji</label><br/>
                      <select id="productionYear" required th:field="*{productionYear}">
                          <option
                                  th:each="productionYears : ${#numbers.sequence(#dates.year(#dates.createNow()), 1900 )}"
                                  th:selected="*{productionYear}" th:text="${productionYears}"
                                  th:value="${productionYears}">
                          </option>
                      </select>
                      <span class="validationError" th:each="error: ${#fields.errors('productionYear')}"
                            th:text="${error}"></span>
                  </td>
                  <td>
                      <label for="mileage">Przebieg</label><br/>
                      <input id="mileage" maxlength="9" pattern="[0-9]*" required size="9" th:field="*{mileage}"
                             th:title="#{numberOnly}" type="text"/>
                      <span class="validationError" th:each="error: ${#fields.errors('mileage')}"
                            th:text="${error}"></span>
                  </td>
                  <td><label for="vin">VIN</label><br/>
                      <input id="vin" maxlength="20" size="20" th:field="*{vin}" type="text"/>
                  </td>
              </tr>
              <tr>
                  <td colspan="3">
                      <label>Rodzaj paliwa</label>
                      <span th:each="fuelTypeElement : ${T(com.app.enums.FuelType).values()}">
								<input th:field="*{fuelType}" th:id="${fuelTypeElement}" th:value="${fuelTypeElement}"
                                       type="radio"/>
								<label th:for="${fuelTypeElement}" th:text="${fuelTypeElement.label}"></label>
							</span>
                  </td>
              </tr>
              <tr class="emptyTableRow">
                  <td colspan="3">
                  </td>
              </tr>
              <tr>
                  <td colspan="3"><label for="price">Cena</label><br/>
                      <input id="price" maxlength="12" pattern="^\d+(\.\d+)*$" required size="12" th:field="*{price}"
                             th:title="#{numberOnly}" type="text"/>
                      <span class="validationError" th:each="error: ${#fields.errors('price')}"
                            th:text="${error}"></span>

                      <select th:field="*{currency}">
                          <option th:each="currencyItem : ${T(com.app.enums.Currency).values()}"
                                  th:selected="*{currency}"
                                  th:text="${currencyItem}"
                                  th:value="${currencyItem}">
                          </option>
                      </select>
                      <input id="netPrice" th:field="*{netPrice}" type="checkbox"/>
                      <label for="netPrice">Cena netto</label>
                      <input id="priceNegotiate" th:field="*{priceNegotiate}" type="checkbox"/>
                      <label for="priceNegotiate">Do negocjacji</label>
                  </td>
              </tr>
              <tr>
                  <td><label for="vehicleSubtype">typ</label><br/>
                      <select id="vehicleSubtype" th:field="*{vehicleSubtype}">
                          <option th:each="vehicleSubtypeElement : ${vehicleSubtypeList}"
                                  th:selected="*{vehicleSubtype}"
                                  th:text="${vehicleSubtypeElement.label}"
                                  th:value="${vehicleSubtypeElement}">
                          </option>
                      </select>
                  </td>
                  <td><label for="carColor">kolor</label><br/>
                      <select id="carColor" th:field="*{carColor}">
                          <option th:each="color : ${T(com.app.enums.CarColor).values()}"
                                  th:selected="*{carColor}"
                                  th:text="${color.label}"
                                  th:value="${color}">
                          </option>
                      </select>
                  </td>
              </tr>
              <tr>
                  <td>
                      <label th:for="enginePower" th:text="#{enginePower}"></label><br/>
                      <input id="enginePower" maxlength="9" pattern="[0-9]*" size="9" th:field="*{enginePower}"
                             th:title="#{numberOnly}" type="text"/>
                      <span class="validationError" th:each="error: ${#fields.errors('enginePower')}"
                            th:text="${error}"></span>
                  </td>
                  <td>
                      <label th:for="engineCapacity" th:text="#{engineCapacity}"></label><br/>
                      <input id="engineCapacity" maxlength="6" pattern="[0-9]*" size="9" th:field="*{engineCapacity}"
                             th:title="#{numberOnly}" type="text"/>
                      <span class="validationError" th:each="error: ${#fields.errors('engineCapacity')}"
                            th:text="${error}"></span>
                  </td>
              </tr>
              <tr>
                  <td>
                      <input id="accidents" th:field="*{accidents}" type="checkbox"/>
                      <label th:for="accidents" th:text="#{accidents}"></label>
                  </td>
                  <td>
                      <input id="firstOwner" th:field="*{firstOwner}" type="checkbox"/>
                      <label th:for="firstOwner" th:text="#{firstOwner}"></label>
                  </td>
                  <td>
                      <input id="damaged" th:field="*{damaged}" type="checkbox"/>
                      <label th:for="damaged" th:text="#{damaged}"></label>
                  </td>
              </tr>
              <tr class="emptyTableRow">
                  <td colspan="3"></td>
              </tr>
              <tr>
                  <td colspan="3">
                      <label for="title">Tytu≈Ç</label><br/>
                      <input class="w-100" id="title" maxlength="200" required size="9" th:field="*{title}"
                             type="text"/>
                      <span class="validationError" th:each="error: ${#fields.errors('title')}"
                            th:text="${error}"></span>
                  </td>
              </tr>
              <tr>
                  <td colspan="3">
                      <label for="description">Opis</label><br/>
                      <textarea class="w-100" id="description" maxlength="3000" rows="5" th:field="*{description}">
							</textarea>
                  </td>
              </tr>
          </table>

          <div th:replace="announcement/announcementImageGallery :: announcementImageGallery(${announcement}, true)"></div>

      </form>

  </div>
  <div th:replace="fragments/footer :: footer"></div>

  <script>
      $(document).ready(function () {
          $("#upload-file-input").on("change", uploadFile);
      });

      let editor = new Jodit('#description', {
          width: 800
      });
  </script>
  </body>
</html>
